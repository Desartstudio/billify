<?xml version="1.0" encoding="UTF-8"?>
<database name="propel" defaultIdMethod="native" noXsd="true" package="lib.model">

  <table name="banca" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="abi" type="VARCHAR" size="255" required="true" default="null" />
    <column name="cab" type="VARCHAR" size="255" required="true" default="null" />
    <column name="cin" type="VARCHAR" size="255" required="true" default="null" />
    <column name="iban" type="VARCHAR" size="255" required="true" default="null" />
    <column name="numero_conto" type="VARCHAR" size="255" required="true" default="null" />
    <column name="nome_banca" type="VARCHAR" size="255" required="true" default="null" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="bug" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="priorita" type="VARCHAR" size="255" required="true" default="null" />
    <column name="modulo" type="VARCHAR" size="255" required="true" default="null" />
    <column name="testo" type="LONGVARCHAR" required="true" />
    <column name="data" type="DATE" />
    <column name="stato" type="VARCHAR" size="255" required="true" default="null" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="contatto" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <column name="azienda" type="CHAR" required="true" default="" />
    <column name="ragione_sociale" type="VARCHAR" size="255" />
    <column name="via" type="VARCHAR" size="255" />
    <column name="citta" type="VARCHAR" size="100" />
    <column name="provincia" type="VARCHAR" size="5" />
    <column name="cap" type="VARCHAR" size="5" />
    <column name="nazione" type="VARCHAR" size="255" />
    <column name="piva" type="VARCHAR" size="20" />
    <column name="cf" type="VARCHAR" size="50" />
    <column name="cognome" type="VARCHAR" size="50" />
    <column name="nome" type="VARCHAR" size="50" />
    <column name="telefono" type="VARCHAR" size="20" />
    <column name="fax" type="VARCHAR" size="20" />
    <column name="cellulare" type="VARCHAR" size="20" />
    <column name="email" type="VARCHAR" size="100" />
    <column name="modo_pagamento_id" type="INTEGER" />
    <column name="stato" type="CHAR" required="true" default="a" />
    <column name="contatto" type="VARCHAR" size="255" />
    
    <column name="id_tema_fattura" type="INTEGER" />
    <column name="id_banca" type="INTEGER" />
    <column name="calcola_ritenuta_acconto" type="CHAR" required="true" default="a" />
    <column name="includi_tasse" type="CHAR" required="true" default="" />
    <column name="calcola_tasse" type="CHAR" required="true" default="s" />
    <column name="cod" type="VARCHAR" size="255" />
    <column name="note" type="LONGVARCHAR" />
    <column name="class_key" type="integer" inheritance="single" default="1">
      <inheritance key="2" class="Fornitore" extends="pim.Contatto"/>
      <inheritance key="1" class="Cliente" extends="pim.Contatto"/>
    </column>

    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <index name="cliente_cognome_index">
      <index-column name="cognome" />
    </index>
    <foreign-key foreignTable="modo_pagamento" onDelete="SET NULL" onUpdate="CASCADE">
      <reference local="modo_pagamento_id" foreign="id" />
    </foreign-key>
    <foreign-key foreignTable="tema_fattura" onDelete="SET NULL" onUpdate="CASCADE">
      <reference local="id_tema_fattura" foreign="id" />
    </foreign-key>
    <foreign-key foreignTable="banca" onDelete="SET NULL" onUpdate="CASCADE">
      <reference local="id_banca" foreign="id" />
    </foreign-key>
    <index name="cliente_id_banca_index">
      <index-column name="id_banca" />
    </index>
    <index name="cliente_FI_1">
      <index-column name="modo_pagamento_id" />
    </index>
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
    <index name="piva">
      <index-column name="piva" />
    </index>
    <index name="id_tema_fattura">
      <index-column name="id_tema_fattura" />
    </index>
  </table>

  <table name="codice_iva" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="nome" type="VARCHAR" size="255" required="true" default="null" />
    <column name="valore" type="INTEGER" required="true" default="0" />
    <column name="descrizione" type="LONGVARCHAR" required="true" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="dettagli_fattura" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="fattura_id" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="fattura" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="fattura_id" foreign="id" />
    </foreign-key>
    <column name="descrizione" type="LONGVARCHAR" />
    <column name="qty" type="VARCHAR" size="10" required="true" default="0" />
    <column name="sconto" type="VARCHAR" size="10" required="true" default="0" />
    <column name="iva" type="INTEGER" required="true" default="0" />
    <column name="prezzo" type="VARCHAR" size="50" required="true" default="0" />
    <index name="dettagli_fattura_FI_1">
      <index-column name="fattura_id" />
    </index>
  </table>

  <table name="fattura" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <column name="num_fattura" type="VARCHAR" size="10" required="true" default="0" />
    <column name="cliente_id" type="INTEGER" required="true" default="0" />
    <column name="data" type="DATE" required="true" />
    <column name="data_stato" type="DATE" />
    <column name="modo_pagamento_id" type="INTEGER" />
    <column name="sconto" type="INTEGER" default="0" />
    <column name="vat" type="INTEGER" default="20" />
    <column name="spese_anticipate" type="FLOAT" default="0" />
    <column name="imposte" type="FLOAT" />
    <column name="imponibile" type="FLOAT" />
    <column name="stato" type="CHAR" default="n" />
    <column name="iva_pagata" type="CHAR" default="n" />
    <column name="iva_depositata" type="CHAR" default="n" />
    <column name="commercialista" type="CHAR" default="n" />
    <column name="note" type="LONGVARCHAR" />
    <column name="calcola_ritenuta_acconto" type="CHAR" default="a" />
    <column name="includi_tasse" type="CHAR" default="" />
    <column name="calcola_tasse" type="CHAR" default="s" />
    <column name="class_key" type="integer" inheritance="single" default="1">
      <inheritance key="2" class="Acquisto" extends="pim.Fattura"/>
      <inheritance key="1" class="Vendita" extends="pim.Fattura"/>
    </column>

    <foreign-key foreignTable="modo_pagamento" onDelete="SET NULL" onUpdate="CASCADE">
      <reference local="modo_pagamento_id" foreign="id" />
    </foreign-key>
    <foreign-key foreignTable="contatto" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="cliente_id" foreign="id" />
    </foreign-key>
    <index name="fattura_num_fattura_index">
      <index-column name="num_fattura" />
    </index>
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <index name="fattura_FI_1">
      <index-column name="cliente_id" />
    </index>
    <index name="fattura_FI_2">
      <index-column name="modo_pagamento_id" />
    </index>
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="impostazione">
    <column name="id_utente" type="INTEGER" required="true" primaryKey="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="num_clienti" type="INTEGER" required="true" default="20" />
    <column name="num_fatture" type="INTEGER" required="true" default="20" />
    <column name="righe_dettagli" type="INTEGER" required="true" default="5" />
    <column name="ritenuta_acconto" type="VARCHAR" size="255" required="true" default="20/100" />
    <column name="tipo_ritenuta" type="VARCHAR" size="255" required="true" default="debito" />
    <column name="riepilogo_home" type="CHAR" required="true" default="" />
    <column name="consegna_commercialista" type="CHAR" required="true" default="" />
    <column name="deposita_iva" type="CHAR" required="true" default="" />
    <column name="fattura_automatica" type="CHAR" required="true" default="s" />
    <column name="codice_cliente" type="CHAR" required="true" default="" />
    <column name="label_imponibile" type="VARCHAR" size="255" required="true" default="Imponibile" />
    <column name="label_spese" type="VARCHAR" size="255" required="true" default="Spese Anticipate" />
    <column name="label_imponibile_iva" type="VARCHAR" size="255" required="true" default="Imponibile ai fini iva" />
    <column name="label_iva" type="VARCHAR" size="255" required="true" default="Iva" />
    <column name="label_totale_fattura" type="VARCHAR" size="255" required="true" default="Totale Fattura" />
    <column name="label_ritenuta_acconto" type="VARCHAR" size="255" required="true" default="Ritenuta d'acconto" />
    <column name="label_netto_liquidare" type="VARCHAR" size="255" required="true" default="Netto da liquidare" />
    <column name="label_quantita" type="VARCHAR" size="255" required="true" default="Qty" />
    <column name="label_descrizione" type="VARCHAR" size="255" required="true" default="Descrizione" />
    <column name="label_prezzo_singolo" type="VARCHAR" size="255" required="true" default="Prezzo Singolo" />
    <column name="label_prezzo_totale" type="VARCHAR" size="255" required="true" default="Prezzo Totale" />
    <column name="label_sconto" type="VARCHAR" size="255" required="true" default="Sconto" />
  </table>

  <table name="invitation_code" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="codice" type="VARCHAR" size="10" required="true" default="null" />
    <column name="inviato" type="CHAR" required="true" default="" />
    <column name="email" type="VARCHAR" size="255" />
    <unique name="codice">
      <unique-column name="codice" />
    </unique>
  </table>

  <table name="modo_pagamento" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="num_giorni" type="INTEGER" required="true" default="0" />
    <column name="descrizione" type="VARCHAR" size="50" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="pagina" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="titolo" type="VARCHAR" size="255" required="true" default="null" />
    <column name="corpo" type="LONGVARCHAR" required="true" />
  </table>

  <table name="paypal" idMethod="native">
    <column name="id" type="BIGINT" required="true" autoIncrement="true" primaryKey="true" />
    <column name="date" type="TIMESTAMP" />
    <column name="item_name" type="VARCHAR" size="130" />
    <column name="receiver_email" type="VARCHAR" size="125" />
    <column name="item_number" type="VARCHAR" size="130" />
    <column name="quantity" type="SMALLINT" />
    <column name="id_utente" type="INTEGER" />
    <column name="payment_status" type="CHAR" />
    <column name="pending_reason" type="CHAR" />
    <column name="payment_gross" type="FLOAT" />
    <column name="payment_fee" type="FLOAT" />
    <column name="payment_type" type="CHAR" />
    <column name="payment_date" type="VARCHAR" size="50" required="true" default="0" />
    <column name="txn_id" type="VARCHAR" size="20" />
    <column name="payer_email" type="VARCHAR" size="125" />
    <column name="payer_status" type="VARCHAR" size="255" required="true" default="unverified" />
    <column name="txn_type" type="VARCHAR" size="255" required="true" default="subscr_payment" />
    <column name="first_name" type="VARCHAR" size="35" />
    <column name="last_name" type="VARCHAR" size="60" />
    <column name="address_city" type="VARCHAR" size="60" />
    <column name="address_street" type="VARCHAR" size="60" />
    <column name="address_state" type="VARCHAR" size="60" />
    <column name="address_zip" type="VARCHAR" size="15" />
    <column name="address_country" type="VARCHAR" size="60" />
    <column name="address_status" type="VARCHAR" size="255" required="true" default="unconfirmed" />
    <column name="subscr_date" type="VARCHAR" size="50" />
    <column name="period1" type="VARCHAR" size="20" required="true" default="UNK" />
    <column name="period2" type="VARCHAR" size="20" required="true" default="UNK" />
    <column name="period3" type="VARCHAR" size="20" required="true" default="UNK" />
    <column name="amount1" type="FLOAT" required="true" default="0" />
    <column name="amount2" type="FLOAT" required="true" default="0" />
    <column name="amount3" type="FLOAT" required="true" default="0" />
    <column name="recurring" type="TINYINT" required="true" default="1" />
    <column name="reattempt" type="TINYINT" required="true" default="0" />
    <column name="retry_at" type="VARCHAR" size="50" />
    <column name="recur_times" type="SMALLINT" required="true" default="0" />
    <column name="subscr_id" type="VARCHAR" size="20" />
    <column name="entirepost" type="LONGVARCHAR" />
    <column name="paypal_verified" type="VARCHAR" size="255" required="true" default="INVALID" />
    <column name="verify_sign" type="VARCHAR" size="125" />
    <index name="txn_type">
      <index-column name="txn_type" />
    </index>
    <index name="payment_status">
      <index-column name="payment_status" />
    </index>
    <index name="pending_reason">
      <index-column name="pending_reason" />
    </index>
    <index name="payer_status">
      <index-column name="payer_status" />
    </index>
    <index name="payment_type">
      <index-column name="payment_type" />
    </index>
    <index name="retry_at">
      <index-column name="retry_at" />
    </index>
    <index name="receiver_email">
      <index-column name="receiver_email" />
    </index>
    <index name="date">
      <index-column name="date" />
    </index>
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="prodotto" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="codice" type="VARCHAR" size="255" />
    <column name="nome" type="VARCHAR" size="255" required="true" default="null" />
    <column name="prezzo" type="FLOAT" required="true" default="0" />
    <index name="codice">
      <index-column name="codice" />
    </index>
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="tags_fattura" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_fattura" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="fattura" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_fattura" foreign="id" />
    </foreign-key>
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="tag" type="VARCHAR" size="255" required="true" default="null" />
    <column name="tag_normalizzato" type="VARCHAR" size="255" required="true" default="null" />
    <column name="data" type="DATE" required="true" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
    <unique name="id_fattura_2">
      <unique-column name="id_fattura" />
      <unique-column name="id_utente" />
      <unique-column name="tag_normalizzato" />
    </unique>
  </table>

  <table name="tassa" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="nome" type="VARCHAR" size="255" required="true" default="null" />
    <column name="valore" type="VARCHAR" size="255" required="true" default="null" />
    <column name="descrizione" type="VARCHAR" size="255" required="true" default="null" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="tema_fattura" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_utente" type="INTEGER" required="true" default="0" />
    <foreign-key foreignTable="utente" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="id_utente" foreign="id" />
    </foreign-key>
    <column name="nome" type="VARCHAR" size="100" required="true" default="null" />
    <column name="template" type="LONGVARCHAR" required="true" />
    <column name="css" type="LONGVARCHAR" required="true" />
    <column name="logo" type="VARCHAR" size="255" />
    <index name="id_utente">
      <index-column name="id_utente" />
    </index>
  </table>

  <table name="utente" idMethod="native">
    <column name="id" type="INTEGER" required="true" autoIncrement="true" primaryKey="true" />
    <column name="id_invitation_code" type="INTEGER" />
    <column name="username" type="VARCHAR" size="255" required="true" default="null" />
    <column name="nome" type="VARCHAR" size="255" required="true" default="null" />
    <column name="cognome" type="VARCHAR" size="255" required="true" default="null" />
    <column name="ragione_sociale" type="VARCHAR" size="255" required="true" default="null" />
    <column name="partita_iva" type="VARCHAR" size="255" required="true" default="null" />
    <column name="codice_fiscale" type="VARCHAR" size="255" required="true" default="null" />
    <column name="email" type="VARCHAR" size="255" required="true" default="null" />
    <column name="password" type="VARCHAR" size="255" required="true" default="null" />
    <column name="data_attivazione" type="DATE" required="true" />
    <column name="data_rinnovo" type="DATE" required="true" />
    <column name="tipo" type="VARCHAR" size="255" required="true" />
    <column name="stato" type="VARCHAR" size="255" required="true" default="attivo" />
    <column name="fattura" type="CHAR" required="true" default="" />
    <column name="lastlogin" type="TIMESTAMP" required="true" />
    <column name="approva_contratto" type="INTEGER" required="true" default="0" />
    <column name="approva_policy" type="INTEGER" required="true" default="0" />
    <column name="sconto" type="INTEGER" required="true" default="0" />
    <index name="id_invitation_code">
      <index-column name="id_invitation_code" />
    </index>
    <unique name="username">
      <unique-column name="username" />
    </unique>
  </table>

</database>
